# 实时同步功能部署说明

## ✅ 已完成的工作

1. **添加Firebase依赖** - 已更新 `package.json`
2. **创建Firebase配置文件** - 已创建 `src/firebase.ts`
3. **集成实时同步功能** - 已修改 `src/App.tsx`，支持Firebase实时同步
4. **构建项目** - 已成功构建，生成的文件在 `dist` 目录
5. **提交代码** - 所有更改已提交到本地Git仓库

## 📤 部署步骤

### 方法1：使用GitHub Actions自动部署（推荐）

代码已经配置了GitHub Actions工作流（`.github/workflows/deploy.yml`），当您推送代码到GitHub后，会自动构建并部署到GitHub Pages。

**操作步骤：**
1. 确保网络连接正常
2. 运行以下命令推送代码：
   ```bash
   git push origin main
   ```
   或者如果远程分支是master：
   ```bash
   git push origin master
   ```
3. 推送成功后，GitHub Actions会自动：
   - 安装依赖
   - 构建项目
   - 部署到GitHub Pages

### 方法2：手动部署

如果自动部署失败，可以手动操作：

1. **构建项目**（已完成）：
   ```bash
   npm run build
   ```

2. **将dist目录内容部署到GitHub Pages**：
   - 如果使用gh-pages分支：
     ```bash
     npm install -g gh-pages
     gh-pages -d dist
     ```
   - 或者将dist目录内容复制到仓库根目录并推送

## 🔧 Firebase配置（重要）

**当前状态**：代码已集成Firebase，但需要配置Firebase项目才能启用跨设备实时同步。

### 配置步骤：

1. **创建Firebase项目**（参考 `FIREBASE_SETUP.md`）
2. **获取Firebase配置信息**
3. **更新 `src/firebase.ts` 文件**，将配置信息填入 `firebaseConfig` 对象
4. **重新构建并部署**

### 未配置Firebase时的行为：

- ✅ 系统会自动降级到本地存储模式
- ✅ 仍支持同一浏览器标签页之间的同步（使用BroadcastChannel）
- ⚠️ 不支持跨设备实时同步

## 🎯 功能说明

### 已实现的功能：

1. **Firebase实时同步**（需配置Firebase后启用）
   - 管理员更新数据后，全国各地的店员都能实时看到最新数据
   - 无需刷新页面，数据自动同步

2. **本地存储同步**（无需配置，自动启用）
   - 同一浏览器不同标签页之间的实时同步
   - 数据保存在浏览器本地存储

3. **手动同步**
   - 点击"手动同步"按钮可立即获取最新数据

4. **数据备份**
   - 支持导出/导入JSON格式的数据备份

## 📝 注意事项

1. **首次部署**：推送代码后，需要在GitHub仓库设置中启用GitHub Pages
2. **Firebase配置**：配置Firebase后才能实现跨设备实时同步
3. **网络问题**：如果推送失败，可能是网络连接问题，稍后重试即可

## 🔗 相关文件

- `FIREBASE_SETUP.md` - Firebase详细配置说明
- `src/firebase.ts` - Firebase配置文件
- `src/App.tsx` - 主应用文件（已集成实时同步）
- `.github/workflows/deploy.yml` - GitHub Actions部署配置

---

**当前状态**：代码已准备就绪，等待推送到GitHub即可自动部署。

